{"ast":null,"code":"var hashUtils = require('./browserHashUtils');\n\nvar Buffer = require('buffer/').Buffer;\n\nvar BLOCK_SIZE = 64;\nvar DIGEST_LENGTH = 16;\nvar INIT = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476];\n/**\n * @api private\n */\n\nfunction Md5() {\n  this.state = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476];\n  this.buffer = new DataView(new ArrayBuffer(BLOCK_SIZE));\n  this.bufferLength = 0;\n  this.bytesHashed = 0;\n  this.finished = false;\n}\n/**\n * @api private\n */\n\n\nmodule.exports = exports = Md5;\nMd5.BLOCK_SIZE = BLOCK_SIZE;\n\nMd5.prototype.update = function (sourceData) {\n  if (hashUtils.isEmptyData(sourceData)) {\n    return this;\n  } else if (this.finished) {\n    throw new Error('Attempted to update an already finished hash.');\n  }\n\n  var data = hashUtils.convertToBuffer(sourceData);\n  var position = 0;\n  var byteLength = data.byteLength;\n  this.bytesHashed += byteLength;\n\n  while (byteLength > 0) {\n    this.buffer.setUint8(this.bufferLength++, data[position++]);\n    byteLength--;\n\n    if (this.bufferLength === BLOCK_SIZE) {\n      this.hashBuffer();\n      this.bufferLength = 0;\n    }\n  }\n\n  return this;\n};\n\nMd5.prototype.digest = function (encoding) {\n  if (!this.finished) {\n    var _a = this,\n        buffer = _a.buffer,\n        undecoratedLength = _a.bufferLength,\n        bytesHashed = _a.bytesHashed;\n\n    var bitsHashed = bytesHashed * 8;\n    buffer.setUint8(this.bufferLength++, 128); // Ensure the final block has enough room for the hashed length\n\n    if (undecoratedLength % BLOCK_SIZE >= BLOCK_SIZE - 8) {\n      for (var i = this.bufferLength; i < BLOCK_SIZE; i++) {\n        buffer.setUint8(i, 0);\n      }\n\n      this.hashBuffer();\n      this.bufferLength = 0;\n    }\n\n    for (var i = this.bufferLength; i < BLOCK_SIZE - 8; i++) {\n      buffer.setUint8(i, 0);\n    }\n\n    buffer.setUint32(BLOCK_SIZE - 8, bitsHashed >>> 0, true);\n    buffer.setUint32(BLOCK_SIZE - 4, Math.floor(bitsHashed / 0x100000000), true);\n    this.hashBuffer();\n    this.finished = true;\n  }\n\n  var out = new DataView(new ArrayBuffer(DIGEST_LENGTH));\n\n  for (var i = 0; i < 4; i++) {\n    out.setUint32(i * 4, this.state[i], true);\n  }\n\n  var buff = new Buffer(out.buffer, out.byteOffset, out.byteLength);\n  return encoding ? buff.toString(encoding) : buff;\n};\n\nMd5.prototype.hashBuffer = function () {\n  var _a = this,\n      buffer = _a.buffer,\n      state = _a.state;\n\n  var a = state[0],\n      b = state[1],\n      c = state[2],\n      d = state[3];\n  a = ff(a, b, c, d, buffer.getUint32(0, true), 7, 0xd76aa478);\n  d = ff(d, a, b, c, buffer.getUint32(4, true), 12, 0xe8c7b756);\n  c = ff(c, d, a, b, buffer.getUint32(8, true), 17, 0x242070db);\n  b = ff(b, c, d, a, buffer.getUint32(12, true), 22, 0xc1bdceee);\n  a = ff(a, b, c, d, buffer.getUint32(16, true), 7, 0xf57c0faf);\n  d = ff(d, a, b, c, buffer.getUint32(20, true), 12, 0x4787c62a);\n  c = ff(c, d, a, b, buffer.getUint32(24, true), 17, 0xa8304613);\n  b = ff(b, c, d, a, buffer.getUint32(28, true), 22, 0xfd469501);\n  a = ff(a, b, c, d, buffer.getUint32(32, true), 7, 0x698098d8);\n  d = ff(d, a, b, c, buffer.getUint32(36, true), 12, 0x8b44f7af);\n  c = ff(c, d, a, b, buffer.getUint32(40, true), 17, 0xffff5bb1);\n  b = ff(b, c, d, a, buffer.getUint32(44, true), 22, 0x895cd7be);\n  a = ff(a, b, c, d, buffer.getUint32(48, true), 7, 0x6b901122);\n  d = ff(d, a, b, c, buffer.getUint32(52, true), 12, 0xfd987193);\n  c = ff(c, d, a, b, buffer.getUint32(56, true), 17, 0xa679438e);\n  b = ff(b, c, d, a, buffer.getUint32(60, true), 22, 0x49b40821);\n  a = gg(a, b, c, d, buffer.getUint32(4, true), 5, 0xf61e2562);\n  d = gg(d, a, b, c, buffer.getUint32(24, true), 9, 0xc040b340);\n  c = gg(c, d, a, b, buffer.getUint32(44, true), 14, 0x265e5a51);\n  b = gg(b, c, d, a, buffer.getUint32(0, true), 20, 0xe9b6c7aa);\n  a = gg(a, b, c, d, buffer.getUint32(20, true), 5, 0xd62f105d);\n  d = gg(d, a, b, c, buffer.getUint32(40, true), 9, 0x02441453);\n  c = gg(c, d, a, b, buffer.getUint32(60, true), 14, 0xd8a1e681);\n  b = gg(b, c, d, a, buffer.getUint32(16, true), 20, 0xe7d3fbc8);\n  a = gg(a, b, c, d, buffer.getUint32(36, true), 5, 0x21e1cde6);\n  d = gg(d, a, b, c, buffer.getUint32(56, true), 9, 0xc33707d6);\n  c = gg(c, d, a, b, buffer.getUint32(12, true), 14, 0xf4d50d87);\n  b = gg(b, c, d, a, buffer.getUint32(32, true), 20, 0x455a14ed);\n  a = gg(a, b, c, d, buffer.getUint32(52, true), 5, 0xa9e3e905);\n  d = gg(d, a, b, c, buffer.getUint32(8, true), 9, 0xfcefa3f8);\n  c = gg(c, d, a, b, buffer.getUint32(28, true), 14, 0x676f02d9);\n  b = gg(b, c, d, a, buffer.getUint32(48, true), 20, 0x8d2a4c8a);\n  a = hh(a, b, c, d, buffer.getUint32(20, true), 4, 0xfffa3942);\n  d = hh(d, a, b, c, buffer.getUint32(32, true), 11, 0x8771f681);\n  c = hh(c, d, a, b, buffer.getUint32(44, true), 16, 0x6d9d6122);\n  b = hh(b, c, d, a, buffer.getUint32(56, true), 23, 0xfde5380c);\n  a = hh(a, b, c, d, buffer.getUint32(4, true), 4, 0xa4beea44);\n  d = hh(d, a, b, c, buffer.getUint32(16, true), 11, 0x4bdecfa9);\n  c = hh(c, d, a, b, buffer.getUint32(28, true), 16, 0xf6bb4b60);\n  b = hh(b, c, d, a, buffer.getUint32(40, true), 23, 0xbebfbc70);\n  a = hh(a, b, c, d, buffer.getUint32(52, true), 4, 0x289b7ec6);\n  d = hh(d, a, b, c, buffer.getUint32(0, true), 11, 0xeaa127fa);\n  c = hh(c, d, a, b, buffer.getUint32(12, true), 16, 0xd4ef3085);\n  b = hh(b, c, d, a, buffer.getUint32(24, true), 23, 0x04881d05);\n  a = hh(a, b, c, d, buffer.getUint32(36, true), 4, 0xd9d4d039);\n  d = hh(d, a, b, c, buffer.getUint32(48, true), 11, 0xe6db99e5);\n  c = hh(c, d, a, b, buffer.getUint32(60, true), 16, 0x1fa27cf8);\n  b = hh(b, c, d, a, buffer.getUint32(8, true), 23, 0xc4ac5665);\n  a = ii(a, b, c, d, buffer.getUint32(0, true), 6, 0xf4292244);\n  d = ii(d, a, b, c, buffer.getUint32(28, true), 10, 0x432aff97);\n  c = ii(c, d, a, b, buffer.getUint32(56, true), 15, 0xab9423a7);\n  b = ii(b, c, d, a, buffer.getUint32(20, true), 21, 0xfc93a039);\n  a = ii(a, b, c, d, buffer.getUint32(48, true), 6, 0x655b59c3);\n  d = ii(d, a, b, c, buffer.getUint32(12, true), 10, 0x8f0ccc92);\n  c = ii(c, d, a, b, buffer.getUint32(40, true), 15, 0xffeff47d);\n  b = ii(b, c, d, a, buffer.getUint32(4, true), 21, 0x85845dd1);\n  a = ii(a, b, c, d, buffer.getUint32(32, true), 6, 0x6fa87e4f);\n  d = ii(d, a, b, c, buffer.getUint32(60, true), 10, 0xfe2ce6e0);\n  c = ii(c, d, a, b, buffer.getUint32(24, true), 15, 0xa3014314);\n  b = ii(b, c, d, a, buffer.getUint32(52, true), 21, 0x4e0811a1);\n  a = ii(a, b, c, d, buffer.getUint32(16, true), 6, 0xf7537e82);\n  d = ii(d, a, b, c, buffer.getUint32(44, true), 10, 0xbd3af235);\n  c = ii(c, d, a, b, buffer.getUint32(8, true), 15, 0x2ad7d2bb);\n  b = ii(b, c, d, a, buffer.getUint32(36, true), 21, 0xeb86d391);\n  state[0] = a + state[0] & 0xFFFFFFFF;\n  state[1] = b + state[1] & 0xFFFFFFFF;\n  state[2] = c + state[2] & 0xFFFFFFFF;\n  state[3] = d + state[3] & 0xFFFFFFFF;\n};\n\nfunction cmn(q, a, b, x, s, t) {\n  a = (a + q & 0xFFFFFFFF) + (x + t & 0xFFFFFFFF) & 0xFFFFFFFF;\n  return (a << s | a >>> 32 - s) + b & 0xFFFFFFFF;\n}\n\nfunction ff(a, b, c, d, x, s, t) {\n  return cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction gg(a, b, c, d, x, s, t) {\n  return cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction hh(a, b, c, d, x, s, t) {\n  return cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction ii(a, b, c, d, x, s, t) {\n  return cmn(c ^ (b | ~d), a, b, x, s, t);\n}","map":null,"metadata":{},"sourceType":"script"}